<div class="margin">
  <button [routerLink]="['/admin', 'homepage']" mat-icon-button color="primary">
    <mat-icon>arrow_back</mat-icon>
  </button>
  <span class="page-title">{{this.pageTitle}}</span>
</div>

<div class="flex-center">
  <mat-spinner mode="indeterminate" *ngIf="loading"></mat-spinner>
</div>

<div class="container" [class.hide]="loading">
  <mat-card>
    <mat-card-content>
      <div class="form-container">
        <mat-form-field>
          <input matInput placeholder="{{'admin.home.editSection.title' | translate}}"
            [(ngModel)]="carouselHeader.infoBox.title" [formControl]="headerTitleControl" required>
          <mat-error>{{'admin.home.editSection.titleRequired' | translate}}</mat-error>
        </mat-form-field>
        <mat-form-field>
          <textarea matInput placeholder="{{'admin.home.editSection.description' | translate}}" [formControl]="headerDescriptionControl"
           matTextareaAutosize matAutosizeMinRows="2" [(ngModel)]="carouselHeader.infoBox.description"  matAutosizeMaxRows="6">
          </textarea>
          <mat-error>{{'admin.home.editSection.descriptionRequired' | translate}}</mat-error>
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="{{'admin.home.editSection.relativeURL' | translate}}"
            [(ngModel)]="carouselHeader.infoBox.relativeURL" [formControl]="headerRelativeURLControl"
            required>
          <mat-error>{{'admin.home.editSection.relativeURLRequired' | translate}}</mat-error>
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="{{'admin.home.editSection.buttonText' | translate}}"
            [(ngModel)]="carouselHeader.infoBox.buttonText" [formControl]="headerButtonTextControl"
            required>
          <mat-error>{{'admin.home.editSection.buttonTextRequired' | translate}}</mat-error>
        </mat-form-field>
        <mat-form-field>
          <mat-label> {{'admin.home.editSection.image' | translate}} </mat-label>
          <input matInput disabled=true>
          <div>
            <input id="uploadCaptureInputFile" class="hide" type="file" accept="image/*" (change)="choosePhoto(headerImgElm.files)" #headerImgElm/>
            <img *ngIf="this.headerImage.base64img || carouselHeader.backgroundImage.imageURL" class="image-field"
             [src]="this.headerImage.base64img || carouselHeader.backgroundImage.imageURL">
            <button type="button" (click)="headerImgElm.click()" mat-raised-button color="primary">{{'admin.home.editSection.changeImageButton' | translate}}</button>
          </div>
        </mat-form-field>
        <mat-checkbox  [(ngModel)]="carouselHeader.infoBox.isExternal" [formControl]="headerCheckBoxControl">
          {{'admin.home.editSection.isExternal' | translate}}
        </mat-checkbox>
      </div>
    </mat-card-content>

    <mat-card-actions>
      <div class="flex">
        <button (click)="cancel()" mat-raised-button class="cancel" color="warn">
          {{'general.actions.cancel' | translate}}
        </button>
        <button (click)="saveCarouselData()" mat-raised-button color="primary" [disabled]="!validHeader() || isDataBeingSaved">
          {{'general.actions.save' | translate}}
        </button>
      </div>
    </mat-card-actions>
  </mat-card>

</div>
